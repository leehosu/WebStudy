# JS_Browser

## 주요 기능
- 브라우저의 주요기능은 사용자가 선택한 자원을 서버에 요청하고 브라우저에 표시하는 것입니다.
- 자원의 주소는 URI에 의해 정해진다.
- 브라우저는 HTML과 CSS 명세에 따라 HTML 파일을 해석해서 표시하는데 이 명세는 W3C(World Wide Web Consortium)에서 정한다.

    ##### 브라우저의 인터페이스
    1. URI를 입력할 수 있는 주소 표시줄
    2. 이전 버튼과 다음 버튼
    3. 북마크
    4. 새로 고침 버튼과 현재 문서의 로드를 중단할 수 있는 정지 버튼
    5. 홈 버튼

## 브라우저의 기본 구조
![브라우저 기본 구조](../image/Browser_structure1.png)

1. 사용자 인터페이스 : 주소 표시줄, 이전/다음버튼, 북마크 메뉴 등 요청한 페이지를 보여주는 창을 제외한 나머지 부분
2. 브라우저 엔진 : 사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어
3. 렌더링 엔진 : 요청한 콘텐츠를 표시. 예를 들어 HTML을 요청하면 HTML과 CSS를 파싱하여 화면에 표시
4. 통신 - HTTP 요청과 같은 네트워크 호출에 사용 (독립적인 인터페이스이고 각 플랫폼 하부에서 실행된다.)
5. UI 백엔드 : 콤보 박스와 같은 기본적인 장치를 그린다. 플랫폼에서 명시하지 않은 일반적인 인터페이스로서 OS 사용자 인터페이스 체계를 사용한다.
6. 자바 스크립트 해석기 : 자바 스크립트 코드를 해석하고 실행한다.
7. 자료 저장소 : 자료를 저장하는 계층이다.

## 렌더링 엔진
- 렌더링 엔진의 역할은 요청 받은 내용을 브라우저 화면에 표시하는 일입니다.
- HTML및 XML 문서와 이미지를 표시할 수 있습니다.
- 플러그인이나 브라우저 확장 기능을 이용해 PDF와 같은 유형도 표시할 수 있습니다.
- ###### HTML과 이미지를 CSS표시하는 주된 사용 패턴에 초점이 맞춰집니다.

## 렌더링 엔진들
- 크롬은 웹킷(WebKit)엔진을 사용합니다.
- 웹킷 : 최초 리눅스 플랫폼에서 동작하기 위해 제작된 오픈소스 엔진인데 mac과 windows에서 브라우저를 지원하기 위해 수정된 엔진

## 동작 과정
- 통신으로부터 요청한 문서의 내용을 얻는 것을 시작하고 보통 8KB 단위로 전송됩니다.

![렌더링엔진 동작과정](../image/randering-play.png)

1) 렌더링 엔진은 HTML 문서를 파싱하고 태그를 DOM노드로 변환합니다.
2) 외부 CSS 파일과 함께 포함된 스타일 요소도 파싱합니다.
3) "렌더 트리"라고 불리는 또 다른 트리 생성합니다.
4) 랜더트리 생성이 끝나면 각 노드가 화면의 정확한 위치에 표시되는 배치가 시작됩니다.
5) UI백엔드에서 랜더 트리의 각 노드를 가로지르며 형상을 만들어냅니다.

- 랜더 트리는 색상 또는 면적과 같은 시각적 속성이 있는 사각형을 포함하고 있는데 정해진 순서대로 화면에 표시됩니다.
- 렌더링 엔진은 좀 더 나은 사용자 경험을 위해 가능하면 빠르게 내용을 표시하는데 모든 HTML을 파싱할 때 까지
 기다리지 않고 배치와 그리기 과정을 시작합니다.
 ##### - 즉, 네트워크로부터 나머지 내용이 전송되기를 기다리는 동시에 받는 내용 일부를 먼저 화면에 표시합니다.

 #### 동작과정예
 ![동작과정 예](../image/webkit-structure.png)

 - 웹킷은 요소를 배치하는데 배치(layout)라는 용어를 사용합니다.
 - 어태치 먼트(attachment)는 웹킷이 렌더 트리를 생성하기 위해 DOM노드와 시각 정보를 연결하는 과정입니다.

 ## 파싱과 DOM 트리 구축
 ### 일반적 파싱
 - 파싱은 렌더링 엔진에서 매우 중요한 과정이다.
 - 문서 파싱 : 브라우저가 코드를 이해하고 사용 할 수 있는 구조로 변환하는 것.
 -> 결과는 보통 문서 구조를 나타내는 노드 트리인데 파싱 트리 또는 문법 트리라고도 불린다.
 ### 문법
 - 문맥 자유 문법 : 파싱은 문서에 작성된 언어 또는 형식의 규칙에 따르는데 파싱 할 수 있는 모든 형식은 정해진 용어와 구문 규칙입니다.
